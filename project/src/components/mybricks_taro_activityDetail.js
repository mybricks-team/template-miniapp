/*! For license information please see mybricks_taro_activityDetail.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("@tarojs/components"),require("@tarojs/taro"),require("react")):"function"==typeof define&&define.amd?define(["@tarojs/components","@tarojs/taro","react"],t):"object"==typeof exports?exports.fangzhouComDef=t(require("@tarojs/components"),require("@tarojs/taro"),require("react")):e.fangzhouComDef=t(e["@tarojs/components"],e["@tarojs/taro"],e.React)}(self,((e,t,a)=>(()=>{var n={7592:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});var n=a(359),c=a.n(n),r=a(5207),o=a(9525),E=function(){return E=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var c in t=arguments[a])Object.prototype.hasOwnProperty.call(t,c)&&(e[c]=t[c]);return e},E.apply(this,arguments)},l=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var c=0;for(n=Object.getOwnPropertySymbols(e);c<n.length;c++)t.indexOf(n[c])<0&&Object.prototype.propertyIsEnumerable.call(e,n[c])&&(a[n[c]]=e[n[c]])}return a};function s(e){var t=e.skeleton,a=void 0!==t&&t,s=e.onLoad,i=e.onClick,m=e.onError,u=e.className,B=e.src,d=e.mode,A=l(e,["skeleton","onLoad","onClick","onError","className","src","mode"]),p=(0,n.useState)(!!a),f=p[0],C=p[1];(0,n.useEffect)((function(){B&&a&&C(!0)}),[B,a]);var F=(0,n.useCallback)((function(e){C(!1),null==s||s(e)}),[s]),b=(0,n.useCallback)((function(e){null==i||i(e)}),[i]),g=(0,n.useCallback)((function(e){C(!1),null==m||m(e)}),[m]);return c().createElement(o.View,{className:r.Z.com},c().createElement(o.View,{className:f?"".concat(r.Z.place):"".concat(r.Z.place," ").concat(r.Z.none)}),c().createElement(o.Image,E({},A,{className:u,src:B,mode:d,onClick:b,onLoad:F,onError:g})))}},3078:(e,t,a)=>{var n;function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}!function(){"use strict";var r={}.hasOwnProperty;function o(){for(var e=[],t=0;t<arguments.length;t++){var a=arguments[t];if(a){var n=c(a);if("string"===n||"number"===n)e.push(a);else if(Array.isArray(a)){if(a.length){var E=o.apply(null,a);E&&e.push(E)}}else if("object"===n){if(a.toString!==Object.prototype.toString&&!a.toString.toString().includes("[native code]")){e.push(a.toString());continue}for(var l in a)r.call(a,l)&&a[l]&&e.push(l)}}}return e.join(" ")}e.exports?(o.default=o,e.exports=o):"object"===c(a.amdO)&&a.amdO?void 0===(n=function(){return o}.apply(t,[]))||(e.exports=n):window.classNames=o}()},4763:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});const n={detail:"detail-c9948",head:"head-be1f9",thumbnailSlot:"thumbnailSlot-b132d",thumbnail:"thumbnail-bd5e7",meta:"meta-b1f9d",title:"title-d9af4",datetime:"datetime-ac889",address:"address-dd9cb",content:"content-a43eb",bannerSlot:"bannerSlot-a8966",footerSlot:"footerSlot-ec9f6",empty:"empty-ba0ab",placeholder:"placeholder-d384c",signupBar:"signupBar-b4ab3",share:"share-af1f8",shareButton:"shareButton-d2491",shareText:"shareText-ddedd",contact:"contact-e5556",contactTips:"contactTips-e85b6",avatar:"avatar-d3894",nickname:"nickname-f3ca4",signupButton:"signupButton-e6610",disabled:"disabled-ecfd8",userList:"userList-f4ce9",item:"item-cbc20",avatarWrapper:"avatarWrapper-e3c20",card:"card-e50e0",label:"label-f5819",errorResult:"errorResult-a416d",text:"text-b8cfa",groupCard:"groupCard-df8b6",main:"main-fd690",logo:"logo-b9a43",condition:"condition-ac819",button:"button-ec781"}},5207:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});const n={com:"com-fe1c1",place:"place-f8f60",none:"none-e996f"}},9525:t=>{"use strict";t.exports=e},6801:e=>{"use strict";e.exports=t},359:e=>{"use strict";e.exports=a}},c={};function r(e){var t=c[e];if(void 0!==t)return t.exports;var a=c[e]={exports:{}};return n[e](a,a.exports,r),a.exports}r.amdO={},r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var a in t)r.o(t,a)&&!r.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var o={};return(()=>{"use strict";r.r(o),r.d(o,{default:()=>B});var e=r(359),t=r.n(e),a=r(9525),n=r(7592),c=r(4763),E=r(3078),l=r.n(E),s=r(6801),i=function(){return i=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var c in t=arguments[a])Object.prototype.hasOwnProperty.call(t,c)&&(e[c]=t[c]);return e},i.apply(this,arguments)},m={id:468079575793733,活动名称:"青橙会养生派周易文化公益沙龙1期",活动海报:"https://admin.alialumni.com/mfs/imgs/1692113981887/Ykg8lfo0KytSHM5VEEUANhuk7At2wToi-1692113982164.jpeg",活动开始时间:1692770400598,活动结束时间:1692783018598,活动形式:null,活动地址:"杭州",活动简介:null,活动详情:"%3Cp%3E%E6%9C%AC%E6%9C%9F%E4%B8%BB%E9%A2%98%EF%BC%9A%3Cbr%20%2F%3E%E2%9C%85%20%E5%A6%82%E4%BD%95%E9%80%9A%E8%BF%87%E4%B8%80%E4%B8%AA%E4%BA%BA%E7%9A%84%E5%90%8D%E5%AD%97%EF%BC%8C%E5%BF%AB%E9%80%9F%E4%BA%86%E8%A7%A3%E8%BF%99%E4%B8%AA%E4%BA%BA%E7%9A%84%E6%80%A7%E6%A0%BC%EF%BC%9F%3Cbr%20%2F%3E%E2%9C%85%20%E4%B8%8D%E9%80%82%E5%AE%9C%E7%9A%84%E5%90%8D%E5%AD%97%E4%BC%9A%E5%B8%A6%E6%9D%A5%E5%93%AA%E4%BA%9B%E9%9A%90%E6%82%A3%EF%BC%9F%E5%AD%A9%E5%AD%90%E5%8F%96%E5%90%8D%E7%A6%81%E5%BF%8C%EF%BC%81%E2%9A%A0%EF%B8%8F%3Cbr%20%2F%3E%E2%9C%85%E5%AE%B6%E5%B1%85%E9%A3%8E%E6%B0%B4%E3%80%81%E5%8A%9E%E5%85%AC%E9%A3%8E%E6%B0%B4%E7%9A%84%E7%A6%81%E5%BF%8C%E6%9C%89%E5%93%AA%E4%BA%9B%EF%BC%9F%E5%A6%82%E4%BD%95%E5%A2%9E%E6%97%BA%E4%BA%8B%E4%B8%9A%E5%92%8C%E5%AE%85%E8%BF%90%EF%BC%9F%3Cbr%20%2F%3E%E2%9C%85%E4%B9%B0%E6%88%BF%E3%80%81%E7%A7%9F%E6%88%BF%E6%97%B6%E5%BA%94%E8%AF%A5%E6%B3%A8%E6%84%8F%E5%93%AA%E4%BA%9B%E9%A3%8E%E6%B0%B4%E7%A6%81%E5%BF%8C%EF%BC%9F%3Cbr%20%2F%3E%E2%9C%85%E5%A9%9A%E5%A7%BB%E4%B8%8D%E9%A1%BA%EF%BC%8C%E5%A6%82%E4%BD%95%E8%A7%84%E9%81%BF%E5%92%8C%E5%8C%96%E8%A7%A3%EF%BC%9F%E5%A6%82%E4%BD%95%E6%8B%9B%E6%A1%83%E8%8A%B1%EF%BC%9F%E5%A6%82%E4%BD%95%E6%96%A9%E6%A1%83%E8%8A%B1%EF%BC%9F%3Cbr%20%2F%3E%E2%9C%85%E5%AD%A9%E5%AD%90%E6%88%90%E7%BB%A9%E4%B8%80%E7%9B%B4%E4%B8%8A%E4%B8%8D%E5%8E%BB%EF%BC%8C%E5%A6%82%E4%BD%95%E6%94%B9%E5%96%84%E6%88%90%E6%89%8D%EF%BC%9F%3Cbr%20%2F%3E%E2%9C%85%E5%A6%82%E4%BD%95%E9%80%89%E6%8B%A9%E5%90%88%E4%BD%9C%E4%BC%99%E4%BC%B4%EF%BC%8C%E5%A6%82%E4%BD%95%E6%89%BE%E5%88%B0%E7%94%9F%E5%91%BD%E4%B8%AD%E7%9A%84%E8%B4%B5%E4%BA%BA%EF%BC%9F%3Cbr%20%2F%3E%E2%9C%85%E5%A6%82%E4%BD%95%E9%80%9A%E8%BF%87%E6%98%93%E7%BB%8F%E9%A3%8E%E6%B0%B4%E8%AE%A9%E8%B4%A2%E8%BF%90%E3%80%81%E6%83%85%E6%84%9F%E3%80%81%E4%BA%8B%E4%B8%9A%E7%AD%89%E5%90%84%E6%96%B9%E9%9D%A2%E8%BF%90%E5%8A%BF%E7%BF%BB%E5%80%8D%EF%BC%9F%3Cbr%20%2F%3E%E2%9C%85%E5%A6%82%E4%BD%95%E5%A2%9E%E8%BF%90%E6%97%BA%E8%BF%90%EF%BC%8C%E6%8F%90%E5%8D%87%E6%95%B4%E4%BD%93%E8%BF%90%E5%8A%BF%EF%BC%9F%3Cbr%20%2F%3E%E2%8C%9A%EF%B8%8F%E6%97%B6%E9%97%B4%EF%BC%9A8%E6%9C%8823%E6%97%A5%E4%B8%8B%E5%8D%8814%3A00%EF%BD%9E17%EF%BC%9A30%3Cbr%20%2F%3E%5B%E5%8A%A0%E6%B2%B9%5D%E5%90%8D%E9%A2%9D%E6%9C%89%E9%99%90%EF%BC%8C%E6%8F%90%E5%89%8D%E6%8A%A5%E5%90%8D%EF%BC%8C%E8%B0%A2%E7%BB%9D%E7%A9%BA%E9%99%8D%EF%BC%81%E3%80%90%E9%B8%BD%E5%AD%90%E8%B4%B9200%E5%85%83%E3%80%91%3C%2Fp%3E%0A%3Cp%3E%E5%88%86%E4%BA%AB%E5%98%89%E5%AE%BE%EF%BC%9A%3C%2Fp%3E%0A%3Cp%3E%3Cimg%20style%3D%22max-width%3A%20100%25%3B%22%20src%3D%22https%3A%2F%2Fadmin.alialumni.com%2Fmfs%2Ffiels%2F1692114031230%2FsXELDF2s35UTguRaDF4FzesIv04dXJeV-1692114031631.jpg%22%20%2F%3E%3C%2Fp%3E",活动报名表:[{id:468083709112389,用户:{id:461217339809861,头像:"https://admin.alialumni.com/mfs/imgs/1690438717081/X3lJiCenHakjKJke2Inn8cK1JeoiawsY-1690438717381.jpg",昵称:"新辰",用户名:"odlHh5OvNMK49dDcYP-Ukp8ki73g",阿里花名:"新辰"},_用户:461217339809861,审核状态:"审核通过"},{id:468275728592965,用户:{id:463665624469573,头像:"https://admin.alialumni.com/mfs/imgs/1690438717081/X3lJiCenHakjKJke2Inn8cK1JeoiawsY-1690438717381.jpg",昵称:"新辰",用户名:"odlHh5Iv4G8R1MgwbYgekqH3CGnA",阿里花名:"新辰"},_用户:463665624469573,审核状态:"审核中"}],_活动分类:463762142621765,活动分类:{id:463762142621765,分类名称:"养生派",分类图标:null,分类简介:""},活动城市:"杭州",活动特殊状态:"",报名人数上限:20,_活动发起人:461217339809861,活动发起人:{id:461217339809861,头像:"https://admin.alialumni.com/mfs/imgs/1690438717081/X3lJiCenHakjKJke2Inn8cK1JeoiawsY-1690438717381.jpg",昵称:"新辰",阿里花名:"新辰",微信二维码:"https://admin.alialumni.com/mfs/imgs/1690439180972/HiMTUbYn46LF5xrsPbfihCrlEntavUbs-1690439181398.jpg",阿里认证审核状态:"审核通过"},活动状态:null,_组织:464080158371909,组织:{id:464080158371909,组织名称:"阿里校友志愿者",组织图标:"https://admin.alialumni.com/mfs/imgs/1691138016325/fiPyDzlroojaJF4Xego1Buxwkj5gLauf-1691138016255.jpeg",组织简介:"欢迎全球各地阿里同学积极参与组织建设，加入全球校友志愿者网络，目前志愿者超过300人，分布式协同运营支持社群发展。"},我的状态:""},u=function(e,t){var a=new Date(e),n=new Date(t),c=a.getFullYear(),r=n.getFullYear(),o=a.getMonth()+1,E=n.getMonth()+1,l=a.getDate(),s=n.getDate(),i=a.getHours(),m=n.getHours(),u=a.getMinutes(),B=n.getMinutes(),d=c===r,A=c===(new Date).getFullYear(),p=d||A?"":"".concat(c,"-"),f=d||A?"":"".concat(r,"-"),C=o<10?"0".concat(o):o,F=E<10?"0".concat(E):E,b=l<10?"0".concat(l):l,g=s<10?"0".concat(s):s,v=i<10?"0".concat(i):i,h=m<10?"0".concat(m):m,y=u<10?"0".concat(u):u,w=B<10?"0".concat(B):B;return d?"".concat(C,"-").concat(b," ").concat(v,":").concat(y," 至 ").concat(F,"-").concat(g," ").concat(h,":").concat(w):"".concat(p).concat(C,"-").concat(b," ").concat(v,":").concat(y," 至 ").concat(f).concat(F,"-").concat(g," ").concat(h,":").concat(w)};function B(r){var o,E=r.env,B=(r.data,r.inputs),d=r.outputs,A=(r.slots,r.id),p=(0,e.useState)(E.edit?m:{}),f=p[0],C=p[1],F=(0,e.useState)(!1),b=F[0],g=F[1];(0,e.useEffect)((function(){var e;if(E.edit)g(!0);else{var t=s.getStorageSync("cache".concat(A)),a=null===(e=f["活动发起人"])||void 0===e?void 0:e["微信二维码"];g(!t&&!!a)}}),[f["活动发起人"]]),(0,e.useMemo)((function(){B.status((function(e){C((function(t){var a;return i(i({},t),((a={})["我的状态"]=e,a))}))})),B.value((function(e){var t=(new Date).getTime(),a=e["活动开始时间"],n=e["活动结束时间"];if(t<a){var c=f["活动报名表"]||[];c=c.filter((function(e){return"审核未通过"!==e.审核状态})),e["报名人数上限"]&&e["报名人数上限"]<=c.length&&(e["我的状态"]="报名人数已满")}else e["我的状态"]=t>n?"活动已结束":"活动进行中";C(i({},e))}))}),[]);var v=(0,e.useMemo)((function(){return f["活动开始时间"]&&f["活动结束时间"]?u(f["活动开始时间"],f["活动结束时间"]):""}),[f]),h=(0,e.useMemo)((function(){if(f["活动详情"]){var e=decodeURIComponent(f["活动详情"]);return e.replace(/<img/gi,'<img style="display: block; width: 100%; height: auto;"')}return""}),[f]),y=(0,e.useMemo)((function(){var e;return l()(((e={})[c.Z.content]=!0,e.taro_html=!0,e))}),[]),w=(0,e.useCallback)((function(){f["我的状态"]||d.onSignup({id:f.id})}),[f]),D=(0,e.useMemo)((function(){var e=f["活动报名表"]||[];return e.filter((function(e){return"审核未通过"!==e.审核状态}))}),[f["活动报名表"]]),N=(0,e.useCallback)((function(){var e;d.onClickGroupCard({id:null===(e=f["组织"])||void 0===e?void 0:e.id})}),[f]),Z=(0,e.useCallback)((function(e){d.onClickUserCard({id:e})}),[]),j=(0,e.useCallback)((function(){var e;E.edit||(s.setStorageSync("cache".concat(A),!0),g(!1),s.previewImage({urls:[null===(e=f["活动发起人"])||void 0===e?void 0:e["微信二维码"]]}))}),[f["活动发起人"],E]);return JSON.stringify(f)===JSON.stringify({})?null:"下架"===f["活动状态"]?t().createElement(a.View,{className:c.Z.errorResult},t().createElement(a.View,{className:c.Z.text},"来晚啦，活动已下线")):t().createElement(a.View,{className:c.Z.detail},t().createElement(a.View,{className:c.Z.head},t().createElement(a.View,{className:c.Z.thumbnailSlot},t().createElement(n.Z,{className:c.Z.thumbnail,skeleton:!0,mode:"aspectFill",src:f["活动海报"]})),t().createElement(a.View,{className:c.Z.meta},t().createElement(a.View,{className:c.Z.title},f["活动名称"]),t().createElement(a.View,{className:c.Z.datetime},t().createElement(a.Text,{className:c.Z.text},v)),t().createElement(a.View,{className:c.Z.address},t().createElement(a.Text,{className:c.Z.text},"".concat(f["活动地址"]||""))))),f["组织"]?t().createElement(a.View,{className:c.Z.card},t().createElement(a.View,{className:c.Z.label},"关联社群"),t().createElement(a.View,{className:c.Z.content},t().createElement(a.View,{className:c.Z.groupCard,onClick:N},t().createElement(a.View,{className:c.Z.head},t().createElement(a.View,{className:c.Z.main},f["组织"]["组织图标"]?t().createElement(a.Image,{className:c.Z.logo,mode:"scaleToFill",src:f["组织"]["组织图标"]}):null,t().createElement(a.View,{className:c.Z.meta},t().createElement(a.View,{className:c.Z.title},f["组织"]["组织名称"]))),t().createElement(a.View,{className:c.Z.button},"查看"))))):null,(null==D?void 0:D.length)?t().createElement(a.View,{className:c.Z.card},t().createElement(a.View,{className:c.Z.label},"已报名（",D.length,"）"),t().createElement(a.View,{className:c.Z.content},t().createElement(a.View,{className:c.Z.userList},D.map((function(e,r){var o,E,l;return t().createElement(a.View,{className:c.Z.item,key:r,onClick:function(){Z(e["用户"].id)}},t().createElement(a.View,{className:c.Z.avatarWrapper},t().createElement(n.Z,{skeleton:!0,className:c.Z.avatar,src:(null===(o=e["用户"])||void 0===o?void 0:o["头像"])||"https://ali-ec.static.yximgs.com/udata/pkg/eshop/chrome-plugin-upload/2023-05-30/1685451722186.3a6d5fa5deb9456f.png"})),t().createElement(a.View,{className:c.Z.nickname},(null===(E=e["用户"])||void 0===E?void 0:E["昵称"])||(null===(l=e["用户"])||void 0===l?void 0:l["阿里花名"])||""))}))))):null,t().createElement(a.View,{className:c.Z.card},t().createElement(a.View,{className:c.Z.label},"活动详情"),t().createElement(a.View,{className:c.Z.content},t().createElement(a.RichText,{className:y,nodes:h,selectable:"true",imageMenuPrevent:"false",preview:"true"}))),t().createElement(a.View,{className:c.Z.placeholder}),t().createElement(a.View,{className:c.Z.signupBar},f["活动发起人"]?t().createElement(a.View,{className:c.Z.contact,onClick:j},b?t().createElement(a.View,{className:c.Z.contactTips},"联系活动发起人"):null,t().createElement(a.Image,{className:c.Z.avatar,src:f["活动发起人"]["头像"]}),t().createElement(a.View,{className:c.Z.nickname},f["活动发起人"]["昵称"])):null,t().createElement(a.Button,{className:c.Z.share,"open-type":"share"},t().createElement(a.View,{className:c.Z.shareButton}),t().createElement(a.Text,{className:c.Z.shareText},"分享到微信")),t().createElement(a.View,{className:l()(c.Z.signupButton,(o={},o[c.Z.disabled]=f["我的状态"],o)),onClick:w},f["我的状态"]||"我要报名")))}})(),o})()));