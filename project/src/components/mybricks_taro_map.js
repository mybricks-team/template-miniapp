!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("@tarojs/components"),require("@tarojs/taro"),require("react")):"function"==typeof define&&define.amd?define(["@tarojs/components","@tarojs/taro","react"],e):"object"==typeof exports?exports.fangzhouComDef=e(require("@tarojs/components"),require("@tarojs/taro"),require("react")):t.fangzhouComDef=e(t["@tarojs/components"],t["@tarojs/taro"],t.React)}(self,((t,e,n)=>(()=>{"use strict";var o={9775:(t,e,n)=>{n(247),n(5665),n(5858),n(9098),n(2515),n(6750)},2515:(t,e,n)=>{n(359)},6750:(t,e,n)=>{n(359)},5665:(t,e,n)=>{n(359)},5858:(t,e,n)=>{n(359)},9098:(t,e,n)=>{n(359)},247:(t,e,n)=>{n(359)},6178:(t,e,n)=>{function o(t,e){void 0===t&&(t="u_"),void 0===e&&(e=6);for(var n="",o=0;o<e;o++)n+="abcdefhijkmnprstwxyz0123456789".charAt(Math.floor(30*Math.random()));return t+n}n.d(e,{Vj:()=>o}),n(9775)},1215:(t,e,n)=>{n.d(e,{Z:()=>o});const o={map:"map-c945f"}},9525:e=>{e.exports=t},6801:t=>{t.exports=e},359:t=>{t.exports=n}},r={};function i(t){var e=r[t];if(void 0!==e)return e.exports;var n=r[t]={exports:{}};return o[t](n,n.exports,i),n.exports}i.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return i.d(e,{a:e}),e},i.d=(t,e)=>{for(var n in e)i.o(e,n)&&!i.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var u={};return(()=>{i.r(u),i.d(u,{default:()=>c});var t=i(359),e=i.n(t),n=i(9525),o=i(6801),r=i(6178),a=i(1215),l=function(){return l=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},l.apply(this,arguments)},s={polylines:[],markers:[],fitPoints:[]};function c(i){i.env;var u=i.data,c=i.inputs,f=(i.outputs,(0,t.useState)({longitude:116.4,latitude:39.9,autofit:!1})),d=f[0],p=f[1],m=(0,t.useState)(l({},s)),y=m[0],v=m[1],g=(0,t.useRef)((0,r.Vj)()),j=(0,t.useRef)(null),P=(0,t.useCallback)((function(t){var e=null!=t?t:{},n=e.polylines,o=e.markers,r=e.autofit,i=[];return void 0!==r&&r&&(null==n||n.forEach((function(t){Array.isArray(t.points)&&t.points.length>2&&(i.push(t.points[0]),i.push(t.points[t.points.length-1]))})),null==o||o.forEach((function(t){i.push({latitude:t.latitude,longitude:t.longitude})}))),{polylines:n,markers:o,fitPoints:i}}),[]);return(0,t.useEffect)((function(){j.current=o.createMapContext(g.current)}),[g.current]),(0,t.useMemo)((function(){c.setPos((function(t,e){var n=null!=t?t:{},o=n.longitude,r=n.latitude;p((function(t){return l(l({},t),{longitude:o,latitude:r})})),setTimeout((function(){e.onSetPosOk()}),300)}))}),[]),(0,t.useEffect)((function(){var t,e,n,o;null===(t=c.draw)||void 0===t||t.call(c,(function(t){var e=P(t),n=e.polylines,o=e.markers,r=e.fitPoints;v(l(l({},s),{polylines:n,markers:o,fitPoints:r}))})),null===(e=c.addDraw)||void 0===e||e.call(c,(function(t){var e=P(t),n=e.polylines,o=e.markers,r=e.fitPoints;v((function(t){var e,i;return{polylines:null===(e=t.polylines)||void 0===e?void 0:e.concat(null!=n?n:[]),markers:null===(i=t.markers)||void 0===i?void 0:i.concat(null!=o?o:[]),fitPoints:r}}))})),null===(n=c.setPolyline)||void 0===n||n.call(c,(function(t){Array.isArray(t)&&v((function(e){return l(l({},e),{polylines:t})}))})),null===(o=c.includePoints)||void 0===o||o.call(c,(function(t){j.current.includePoints(t)}))}),[]),(0,t.useEffect)((function(){var t=(null!=y?y:{}).fitPoints;t&&t.length&&j.current.includePoints({points:t,padding:[30,30,30,30]})}),[y.fitPoints]),e().createElement(n.Map,l({id:g.current,setting:{latitude:d.latitude,longitude:d.longitude},latitude:d.latitude,longitude:d.longitude},u,{className:"".concat(a.Z.map," mybricks-map"),polyline:y.polylines,markers:y.markers}))}})(),u})()));