/*! For license information please see mybricks_taro_containerList.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("@tarojs/components"),require("@tarojs/taro"),require("brickd-mobile/es/list"),require("brickd-mobile/es/loading"),require("react")):"function"==typeof define&&define.amd?define(["@tarojs/components","@tarojs/taro","brickd-mobile/es/list","brickd-mobile/es/loading","react"],t):"object"==typeof exports?exports.fangzhouComDef=t(require("@tarojs/components"),require("@tarojs/taro"),require("brickd-mobile/es/list"),require("brickd-mobile/es/loading"),require("react")):e.fangzhouComDef=t(e["@tarojs/components"],e["@tarojs/taro"],e["brickd-mobile/es/list"],e["brickd-mobile/es/loading"],e.React)}(self,((e,t,r,o,n)=>(()=>{var i={9775:(e,t,r)=>{"use strict";r(247),r(5665),r(5858),r(9098),r(2515),r(6750)},2515:(e,t,r)=>{"use strict";r(359)},6750:(e,t,r)=>{"use strict";r(359)},5665:(e,t,r)=>{"use strict";r(359)},5858:(e,t,r)=>{"use strict";r(359)},9098:(e,t,r)=>{"use strict";r(359)},247:(e,t,r)=>{"use strict";r(359)},6178:(e,t,r)=>{"use strict";function o(e,t){void 0===e&&(e="u_"),void 0===t&&(t=6);for(var r="",o=0;o<t;o++)r+="abcdefhijkmnprstwxyz0123456789".charAt(Math.floor(30*Math.random()));return e+r}r.d(t,{Vj:()=>o}),r(9775)},2010:(e,t,r)=>{"use strict";r.r(t)},4740:(e,t,r)=>{"use strict";r(3282),r(7151),r(2833)},7151:(e,t,r)=>{"use strict";r(3282),r(7)},3282:(e,t,r)=>{"use strict";r(2010),r(5755)},3078:(e,t,r)=>{var o;function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}!function(){"use strict";var i={}.hasOwnProperty;function s(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var o=n(r);if("string"===o||"number"===o)e.push(r);else if(Array.isArray(r)){if(r.length){var a=s.apply(null,r);a&&e.push(a)}}else if("object"===o){if(r.toString!==Object.prototype.toString&&!r.toString.toString().includes("[native code]")){e.push(r.toString());continue}for(var c in r)i.call(r,c)&&r[c]&&e.push(c)}}}return e.join(" ")}e.exports?(s.default=s,e.exports=s):"object"===n(r.amdO)&&r.amdO?void 0===(o=function(){return s}.apply(t,[]))||(e.exports=o):window.classNames=s}()},4963:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});const o={list:"list-d9006",mock:"mock-d6649",placeholder:"placeholder-a480e",normal:"normal-b7f27"}},2833:(e,t,r)=>{"use strict";r.r(t)},7:(e,t,r)=>{"use strict";r.r(t)},5755:(e,t,r)=>{"use strict";r.r(t)},9525:t=>{"use strict";t.exports=e},6801:e=>{"use strict";e.exports=t},7116:e=>{"use strict";e.exports=r},4886:e=>{"use strict";e.exports=o},359:e=>{"use strict";e.exports=n}},s={};function a(e){var t=s[e];if(void 0!==t)return t.exports;var r=s[e]={exports:{}};return i[e](r,r.exports,a),r.exports}a.amdO={},a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var c={};return(()=>{"use strict";a.r(c),a.d(c,{default:()=>v}),a(7151);var e,t=a(4886),r=a.n(t),o=(a(4740),a(7116)),n=a.n(o),i=a(359),s=a.n(i),u=a(9525),l=a(6801),f=a(4963),d=a(3078),m=a.n(d),p=a(6178),y=[{index:1},{index:2},{index:3}],b="_itemKey";function v(t){var o,a,c,d=t.env,v=t.data,g=t.inputs,h=t.outputs,j=t.slots,x=(0,i.useRef)(!1),O=(0,i.useState)(d.edit?y:[]),S=O[0],E=O[1],k=(0,i.useState)(0),R=k[0],D=k[1],M=(0,i.useState)(!0),w=(M[0],M[1]),L=(0,i.useState)(e.IDLE),N=L[0],V=L[1];(0,l.usePageScroll)((function(e){var t=e.scrollTop;D(t),w(0===t)})),(0,i.useEffect)((function(){var t,r,o;g.addDataSource((function(t){if(Array.isArray(t)){var r=t.map((function(e,t){var r;return(r={item:e})[b]=""===v.rowKey?(0,p.Vj)():e[v.rowKey]||(0,p.Vj)(),r.index=t,r}));E((function(e){return e.concat(r)})),V(e.IDLE)}})),g.refreshDataSource((function(t){if(Array.isArray(t)){var r=t.map((function(e,t){var r;return(r={item:e})[b]=""===v.rowKey?(0,p.Vj)():e[v.rowKey]||(0,p.Vj)(),r.index=t,r}));E(r),V(e.IDLE)}})),null===(t=g.loading)||void 0===t||t.call(g,(function(t){V(e.LOADING)})),null===(r=g.noMore)||void 0===r||r.call(g,(function(t){V(e.NOMORE)})),null===(o=g.error)||void 0===o||o.call(g,(function(t){V(e.ERROR)}))}),[]);var A=(0,i.useMemo)((function(){return d.edit&&!j.item.size?s().createElement(u.View,{className:f.Z.placeholder},j.item.render()):null}),[d.edit,S,j.item]),q=(0,i.useMemo)((function(){return e.NOMORE!==N}),[N]),I=(0,i.useMemo)((function(){return e.LOADING===N}),[N]),P=(0,i.useMemo)((function(){return e.ERROR===N}),[N]);(0,i.useEffect)((function(){setTimeout((function(){x.current=!0}),1500)}),[]);var T=(0,i.useCallback)((function(){var t;v.scrollRefresh&&x.current&&(V(e.LOADING),null===(t=h.onScrollLoad)||void 0===t||t.call(h))}),[v.scrollRefresh]),Z=(0,i.useMemo)((function(){return!!v.scrollRefresh||N===e.IDLE}),[v.scrollRefresh,N]);return s().createElement(u.View,{className:"".concat(v.scrollRefresh?"".concat(f.Z.list," ").concat(f.Z.scroll):"".concat(f.Z.list," ").concat(f.Z.normal))},A||s().createElement(n(),{loading:I,hasMore:q,scrollTop:R,offset:50,onLoad:T},S.map((function(e,t){var r,o=e[b],n=e.index,i=e.item;return t>0?s().createElement(u.View,{className:m()((r={},r[f.Z.mock]=d.edit,r)),key:o,style:{display:Z?"block":"none"},onClick:function(e){return e.stopPropagation()}},s().createElement(u.View,null,j.item.render({inputValues:{itemData:i,index:n},key:o}))):s().createElement(u.View,{className:f.Z.item,key:o,style:{display:Z?"block":"none"}},j.item.render({inputValues:{itemData:i,index:n},key:o}))})),N!==e.IDLE&&s().createElement(n().Placeholder,null,I&&s().createElement(r(),null,null!==(o=v.loadingTip)&&void 0!==o?o:"..."),P&&(null!==(a=v.errorTip)&&void 0!==a?a:"加载失败，请重试"),!q&&(null!==(c=v.emptyTip)&&void 0!==c?c:"没有更多了"))))}!function(e){e.IDLE="idle",e.LOADING="loading",e.ERROR="error",e.NOMORE="noMore"}(e||(e={}))})(),c})()));