!function(e,r){"object"==typeof exports&&"object"==typeof module?module.exports=r(require("@tarojs/components"),require("@tarojs/taro"),require("brickd-mobile/es/list"),require("brickd-mobile/es/loading"),require("react")):"function"==typeof define&&define.amd?define(["@tarojs/components","@tarojs/taro","brickd-mobile/es/list","brickd-mobile/es/loading","react"],r):"object"==typeof exports?exports.fangzhouComDef=r(require("@tarojs/components"),require("@tarojs/taro"),require("brickd-mobile/es/list"),require("brickd-mobile/es/loading"),require("react")):e.fangzhouComDef=r(e["@tarojs/components"],e["@tarojs/taro"],e["brickd-mobile/es/list"],e["brickd-mobile/es/loading"],e.React)}(self,((e,r,t,o,n)=>(()=>{"use strict";var i={9775:(e,r,t)=>{t(247),t(5665),t(5858),t(9098),t(2515),t(6750)},2515:(e,r,t)=>{t(359)},6750:(e,r,t)=>{t(359)},5665:(e,r,t)=>{t(359)},5858:(e,r,t)=>{t(359)},9098:(e,r,t)=>{t(359)},247:(e,r,t)=>{t(359)},6178:(e,r,t)=>{function o(e,r){void 0===e&&(e="u_"),void 0===r&&(r=6);for(var t="",o=0;o<r;o++)t+="abcdefhijkmnprstwxyz0123456789".charAt(Math.floor(30*Math.random()));return e+t}t.d(r,{Vj:()=>o}),t(9775)},2010:(e,r,t)=>{t.r(r)},4740:(e,r,t)=>{t(3282),t(7151),t(2833)},7151:(e,r,t)=>{t(3282),t(7)},3282:(e,r,t)=>{t(2010),t(5755)},4963:(e,r,t)=>{t.d(r,{Z:()=>o});const o={list:"list-d9006",placeholder:"placeholder-a480e",normal:"normal-b7f27"}},2833:(e,r,t)=>{t.r(r)},7:(e,r,t)=>{t.r(r)},5755:(e,r,t)=>{t.r(r)},9525:r=>{r.exports=e},6801:e=>{e.exports=r},7116:e=>{e.exports=t},4886:e=>{e.exports=o},359:e=>{e.exports=n}},a={};function l(e){var r=a[e];if(void 0!==r)return r.exports;var t=a[e]={exports:{}};return i[e](t,t.exports,l),t.exports}l.n=e=>{var r=e&&e.__esModule?()=>e.default:()=>e;return l.d(r,{a:r}),r},l.d=(e,r)=>{for(var t in r)l.o(r,t)&&!l.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:r[t]})},l.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),l.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var u={};return(()=>{l.r(u),l.d(u,{ContainerList:()=>x,default:()=>O}),l(7151);var e,r,t,o,n=l(4886),i=l.n(n),a=(l(4740),l(7116)),c=l.n(a),s=l(359),d=l.n(s),f=l(9525),m=l(6801),p=l(4963),v=l(6178),b="_itemKey",y=[(e={},e[b]=1,e.index=1,e),(r={},r[b]=2,r.index=2,r),(t={},t[b]=3,t.index=3,t)];!function(e){e.IDLE="idle",e.LOADING="loading",e.ERROR="error",e.NOMORE="noMore"}(o||(o={}));var x=function(e){var r,t,n,a=e.env,l=e.data,u=e.inputs,x=e.outputs,O=e.slots,j=(0,s.useState)(null),E=j[0],R=(j[1],(0,s.useRef)(!1)),h=(0,s.useState)(a.edit?y:[]),g=h[0],D=h[1],M=(0,s.useState)(0),k=M[0],L=M[1],S=(0,s.useState)(!0),N=(S[0],S[1]),I=(0,s.useState)(o.IDLE),w=I[0],A=I[1];(0,m.usePageScroll)((function(e){var r=e.scrollTop;L(r),N(0===r)})),(0,s.useEffect)((function(){var e,r,t;u.addDataSource((function(e){if(Array.isArray(e)){var r=e.map((function(e,r){var t;return(t={item:e})[b]=""===l.rowKey?(0,v.Vj)():e[l.rowKey]||(0,v.Vj)(),t.index=r,t}));D((function(e){return e.concat(r)})),m.nextTick((function(){m.nextTick((function(){w===o.LOADING&&A(o.IDLE)}))}))}})),u.refreshDataSource((function(e){if(Array.isArray(e)){var r=e.map((function(e,r){var t;return(t={item:e})[b]=""===l.rowKey?(0,v.Vj)():e[l.rowKey]||(0,v.Vj)(),t.index=r,t}));D(r),A(o.IDLE)}})),null===(e=u.loading)||void 0===e||e.call(u,(function(e){A(o.LOADING)})),null===(r=u.noMore)||void 0===r||r.call(u,(function(e){A(o.NOMORE)})),null===(t=u.error)||void 0===t||t.call(u,(function(e){A(o.ERROR)}))}),[w,E]);var T=(0,s.useMemo)((function(){return a.edit&&!O.item.size?d().createElement(f.View,{className:p.Z.placeholder},O.item.render()):null}),[a.edit,g,O.item]),q=(0,s.useMemo)((function(){return o.NOMORE!==w}),[w]),V=(0,s.useMemo)((function(){return o.LOADING===w}),[w]),Z=(0,s.useMemo)((function(){return o.ERROR===w}),[w]);(0,s.useEffect)((function(){setTimeout((function(){R.current=!0}),1500)}),[]);var G,P,_,C=(0,s.useCallback)((G=function(){var e;if(l.scrollRefresh&&R.current){if(w===o.LOADING||w===o.NOMORE)return;A(o.LOADING),null===(e=x.onScrollLoad)||void 0===e||e.call(x)}},20,P=(0,s.useRef)(null),_=(0,s.useCallback)((function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];P.current||(P.current=window.setTimeout((function(){P.current=null,G.apply(void 0,e)}),20))}),[G,20]),_),[w,l.scrollRefresh]),K=(0,s.useMemo)((function(){return!!l.scrollRefresh||w===o.IDLE}),[l.scrollRefresh,w]);return d().createElement(f.View,{className:"".concat(l.scrollRefresh?"".concat(p.Z.list," ").concat(p.Z.scroll):"".concat(p.Z.list," ").concat(p.Z.normal))},T||d().createElement(c(),{loading:V,hasMore:q,scrollTop:k,offset:100,onLoad:C},g.map((function(e,r){var t=e[b],o=e.index,n=e.item;return d().createElement(f.View,{className:a.edit&&r>0?"disabled-area":p.Z.item,key:t,style:{display:K?"block":"none"}},O.item.render({inputValues:{itemData:n,index:o},key:t}))})),w!==o.IDLE&&d().createElement(c().Placeholder,null,V&&d().createElement(i(),null,null!==(r=l.loadingTip)&&void 0!==r?r:"..."),Z&&(null!==(t=l.errorTip)&&void 0!==t?t:"加载失败，请重试"),!q&&(null!==(n=l.emptyTip)&&void 0!==n?n:"没有更多了"))))};const O=x})(),u})()));