!function(e,r){"object"==typeof exports&&"object"==typeof module?module.exports=r(require("@tarojs/components"),require("@tarojs/taro"),require("brickd-mobile/es/list"),require("brickd-mobile/es/loading"),require("react")):"function"==typeof define&&define.amd?define(["@tarojs/components","@tarojs/taro","brickd-mobile/es/list","brickd-mobile/es/loading","react"],r):"object"==typeof exports?exports.fangzhouComDef=r(require("@tarojs/components"),require("@tarojs/taro"),require("brickd-mobile/es/list"),require("brickd-mobile/es/loading"),require("react")):e.fangzhouComDef=r(e["@tarojs/components"],e["@tarojs/taro"],e["brickd-mobile/es/list"],e["brickd-mobile/es/loading"],e.React)}(self,((e,r,o,t,n)=>(()=>{"use strict";var i={9775:(e,r,o)=>{o(247),o(5665),o(5858),o(9098),o(2515),o(6750)},2515:(e,r,o)=>{o(359)},6750:(e,r,o)=>{o(359)},5665:(e,r,o)=>{o(359)},5858:(e,r,o)=>{o(359)},9098:(e,r,o)=>{o(359)},247:(e,r,o)=>{o(359)},6178:(e,r,o)=>{function t(e,r){void 0===e&&(e="u_"),void 0===r&&(r=6);for(var o="",t=0;t<r;t++)o+="abcdefhijkmnprstwxyz0123456789".charAt(Math.floor(30*Math.random()));return e+o}o.d(r,{Vj:()=>t}),o(9775)},2010:(e,r,o)=>{o.r(r)},4740:(e,r,o)=>{o(3282),o(7151),o(2833)},7151:(e,r,o)=>{o(3282),o(7)},3282:(e,r,o)=>{o(2010),o(5755)},4963:(e,r,o)=>{o.d(r,{Z:()=>t});const t={list:"list-d9006",placeholder:"placeholder-a480e",normal:"normal-b7f27"}},2833:(e,r,o)=>{o.r(r)},7:(e,r,o)=>{o.r(r)},5755:(e,r,o)=>{o.r(r)},9525:r=>{r.exports=e},6801:e=>{e.exports=r},7116:e=>{e.exports=o},4886:e=>{e.exports=t},359:e=>{e.exports=n}},a={};function l(e){var r=a[e];if(void 0!==r)return r.exports;var o=a[e]={exports:{}};return i[e](o,o.exports,l),o.exports}l.n=e=>{var r=e&&e.__esModule?()=>e.default:()=>e;return l.d(r,{a:r}),r},l.d=(e,r)=>{for(var o in r)l.o(r,o)&&!l.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:r[o]})},l.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),l.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var c={};return(()=>{l.r(c),l.d(c,{default:()=>v}),l(7151);var e,r=l(4886),o=l.n(r),t=(l(4740),l(7116)),n=l.n(t),i=l(359),a=l.n(i),u=l(9525),s=l(6801),d=l(4963),f=l(6178),m=[{index:1},{index:2},{index:3}],p="_itemKey";function v(r){var t,l,c,v=r.env,b=r.data,y=r.inputs,j=r.outputs,x=r.slots,E=(0,i.useRef)(!1),R=(0,i.useState)(v.edit?m:[]),h=R[0],O=R[1],g=(0,i.useState)(0),M=g[0],D=g[1],k=(0,i.useState)(!0),S=(k[0],k[1]),L=(0,i.useState)(e.IDLE),q=L[0],I=L[1];(0,s.usePageScroll)((function(e){var r=e.scrollTop;D(r),S(0===r)})),(0,i.useEffect)((function(){var r,o,t;y.addDataSource((function(r){if(Array.isArray(r)){var o=r.map((function(e,r){var o;return(o={item:e})[p]=""===b.rowKey?(0,f.Vj)():e[b.rowKey]||(0,f.Vj)(),o.index=r,o}));O((function(e){return e.concat(o)})),I(e.IDLE)}})),y.refreshDataSource((function(r){if(Array.isArray(r)){var o=r.map((function(e,r){var o;return(o={item:e})[p]=""===b.rowKey?(0,f.Vj)():e[b.rowKey]||(0,f.Vj)(),o.index=r,o}));O(o),I(e.IDLE)}})),null===(r=y.loading)||void 0===r||r.call(y,(function(r){I(e.LOADING)})),null===(o=y.noMore)||void 0===o||o.call(y,(function(r){I(e.NOMORE)})),null===(t=y.error)||void 0===t||t.call(y,(function(r){I(e.ERROR)}))}),[]);var N=(0,i.useMemo)((function(){return v.edit&&!x.item.size?a().createElement(u.View,{className:d.Z.placeholder},x.item.render()):null}),[v.edit,h,x.item]),w=(0,i.useMemo)((function(){return e.NOMORE!==q}),[q]),A=(0,i.useMemo)((function(){return e.LOADING===q}),[q]),V=(0,i.useMemo)((function(){return e.ERROR===q}),[q]);(0,i.useEffect)((function(){setTimeout((function(){E.current=!0}),1500)}),[]);var T=(0,i.useCallback)((function(){var r;b.scrollRefresh&&E.current&&(I(e.LOADING),null===(r=j.onScrollLoad)||void 0===r||r.call(j))}),[b.scrollRefresh]),Z=(0,i.useMemo)((function(){return!!b.scrollRefresh||q===e.IDLE}),[b.scrollRefresh,q]);return a().createElement(u.View,{className:"".concat(b.scrollRefresh?"".concat(d.Z.list," ").concat(d.Z.scroll):"".concat(d.Z.list," ").concat(d.Z.normal))},N||a().createElement(n(),{loading:A,hasMore:w,scrollTop:M,offset:50,onLoad:T},h.map((function(e){var r=e[p],o=e.index,t=e.item;return a().createElement(u.View,{className:d.Z.item,key:r,style:{display:Z?"block":"none"}},x.item.render({inputValues:{itemData:t,index:o},key:r}))})),q!==e.IDLE&&a().createElement(n().Placeholder,null,A&&a().createElement(o(),null,null!==(t=b.loadingTip)&&void 0!==t?t:"..."),V&&(null!==(l=b.errorTip)&&void 0!==l?l:"加载失败，请重试"),!w&&(null!==(c=b.emptyTip)&&void 0!==c?c:"没有更多了"))))}!function(e){e.IDLE="idle",e.LOADING="loading",e.ERROR="error",e.NOMORE="noMore"}(e||(e={}))})(),c})()));