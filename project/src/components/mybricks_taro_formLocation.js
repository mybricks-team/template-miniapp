!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("@taroify/icons"),require("@tarojs/components"),require("@tarojs/taro"),require("brickd-mobile/es/area-picker"),require("brickd-mobile/es/input"),require("brickd-mobile/es/popup"),require("react")):"function"==typeof define&&define.amd?define(["@taroify/icons","@tarojs/components","@tarojs/taro","brickd-mobile/es/area-picker","brickd-mobile/es/input","brickd-mobile/es/popup","react"],t):"object"==typeof exports?exports.fangzhouComDef=t(require("@taroify/icons"),require("@tarojs/components"),require("@tarojs/taro"),require("brickd-mobile/es/area-picker"),require("brickd-mobile/es/input"),require("brickd-mobile/es/popup"),require("react")):e.fangzhouComDef=t(e["@taroify/icons"],e["@tarojs/components"],e["@tarojs/taro"],e["brickd-mobile/es/area-picker"],e["brickd-mobile/es/input"],e["brickd-mobile/es/popup"],e.React)}(self,((e,t,r,o,n,a,i)=>(()=>{"use strict";var l={7234:(e,t,r)=>{function o(e){return(t="Object",function(e){return Object.prototype.toString.call(e)==="[object ".concat(t,"]")})(e);var t}r.d(t,{Kn:()=>o})},447:(e,t,r)=>{function o(e){var t;return!(!(null==e?void 0:e.edit)&&!(null===(t=null==e?void 0:e.runtime)||void 0===t?void 0:t.debug))}r.d(t,{l:()=>o})},2010:(e,t,r)=>{r.r(t)},8023:(e,t,r)=>{r(9664)},7977:(e,t,r)=>{r(3282),r(8018),r(8434)},2606:(e,t,r)=>{r(8150)},7151:(e,t,r)=>{r(3282),r(7)},9664:(e,t,r)=>{r(3282),r(7151),r(8531)},7278:(e,t,r)=>{r(3282),r(8018),r(7977),r(3685)},3282:(e,t,r)=>{r(2010),r(5755)},8018:(e,t,r)=>{r(3282),r(5980)},7131:(e,t,r)=>{r.d(t,{Z:()=>o});const o={select:"select-c334f"}},8434:(e,t,r)=>{r.r(t)},8150:(e,t,r)=>{r.r(t)},7:(e,t,r)=>{r.r(t)},8531:(e,t,r)=>{r.r(t)},3685:(e,t,r)=>{r.r(t)},5755:(e,t,r)=>{r.r(t)},5980:(e,t,r)=>{r.r(t)},7106:t=>{t.exports=e},9525:e=>{e.exports=t},6801:e=>{e.exports=r},5790:e=>{e.exports=o},5402:e=>{e.exports=n},4529:e=>{e.exports=a},359:e=>{e.exports=i}},u={};function c(e){var t=u[e];if(void 0!==t)return t.exports;var r=u[e]={exports:{}};return l[e](r,r.exports,c),r.exports}c.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return c.d(t,{a:t}),t},c.d=(e,t)=>{for(var r in t)c.o(t,r)&&!c.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},c.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),c.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var s={};return(()=>{c.r(s),c.d(s,{default:()=>f}),c(8023);var e=c(5790),t=c.n(e),r=(c(7278),c(4529)),o=c.n(r),n=(c(2606),c(5402)),a=c.n(n),i=c(359),l=c.n(i),u=c(9525),p=c(7106),d=c(7234),v=c(6801),m=c(447),b=c(7131);function f(e){var r=e.env,n=e.data,c=e.inputs,s=e.outputs,f=(e.slots,e.parentSlot),y=(0,i.useState)([]),k=y[0],h=y[1],g=(0,i.useState)(!1),j=g[0],C=g[1],x=(0,i.useState)({province_list:[],city_list:[],county_list:[]}),q=x[0],_=x[1];(0,i.useEffect)((function(){var e,t,o,a,i,l,u=v.getApp(),s=(0,m.l)(r)?"/mybricks-app-mpsite/api/mock/areaData":"".concat(null===(t=null===(e=null==u?void 0:u.mybricks)||void 0===e?void 0:e.status)||void 0===t?void 0:t.callServiceHost,"/runtime/api/domain/service/run");v.request({url:s,method:"POST",data:{projectId:null===(a=null===(o=null==u?void 0:u.mybricks)||void 0===o?void 0:o.status)||void 0===a?void 0:a.appid,fileId:null===(l=null===(i=null==u?void 0:u.mybricks)||void 0===i?void 0:i.status)||void 0===l?void 0:l.appid,serviceId:"areaData"},success:function(e){_(e.data.data)}}),c.setValue((function(e){switch(!0){case"string"==typeof e:n.value=e;break;case(0,d.Kn)(e):n.value=e[n.name]}})),c.changeType((function(e){n.type=e}))}),[]);var E=(0,i.useCallback)((function(e){return(e=e||"").split("/").map((function(e,t){var r={};switch(t){case 0:r=q.province_list;break;case 1:r=q.city_list;break;case 2:r=q.county_list}return Object.keys(r).forEach((function(t){if(r[t]===e)return t})),""})).filter((function(e){return!!e}))}),[q]),S=(0,i.useCallback)((function(e){for(var t=[],r=0;r<e.length;r++)switch(r){case 0:t.push(q.province_list[e[r]]);break;case 1:t.push(q.city_list[e[r]]);break;case 2:t.push(q.county_list[e[r]])}return t.join("/")}),[q]),O=(0,i.useCallback)((function(){if(r.runtime&&"select"===n.type){var e=E(n.value);h(e),C(!0)}}),[r.runtime,n.value,n.type,E]),w=(0,i.useCallback)((function(){C(!1)}),[]),P=(0,i.useCallback)((function(t){var r,o;n.value=S(t),C(!1),null===(o=null==f?void 0:(r=f._inputs).onChange)||void 0===o||o.call(r,{id:e.id,name:e.name,value:k}),s.onChange(k)}),[S]),T=(0,i.useCallback)((function(t){var r,o,a=t.detail.value;n.value=a,null===(o=null==f?void 0:(r=f._inputs).onChange)||void 0===o||o.call(r,{id:e.id,name:e.name,value:a}),s.onChange(a)}),[]);return l().createElement(l().Fragment,null,l().createElement(u.View,{className:b.Z.select,onClick:O},"text"===n.type?l().createElement(a(),{placeholder:n.placeholder,value:n.value,onChange:T}):null,"select"===n.type?l().createElement(l().Fragment,null,l().createElement(a(),{align:"right",readonly:!0,placeholder:n.placeholder,value:n.value,style:{flex:1}}),l().createElement(p.ArrowRight,null)):null),l().createElement(o(),{open:j,rounded:!0,placement:"bottom",onClose:w},l().createElement(t(),{value:k,onCancel:w,onConfirm:P},l().createElement(t().Toolbar,null,l().createElement(t().Button,null,"取消"),l().createElement(t().Button,null,"确认")),l().createElement(t().Columns,{children:q}))))}})(),s})()));